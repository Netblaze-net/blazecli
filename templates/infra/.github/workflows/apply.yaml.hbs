name: Terraform Apply

on:
  workflow_dispatch:

jobs:
  apply:
    uses: Netblaze-net/workflows/.github/workflows/apply.yaml.j2@main
    with:
      tf_vars: |
        {
          "backend_bucket": "{{ backend_bucket }}",
          "region": "{{ region }}",
          "org_name": "{{ org }}",
          "project_id": "{{ org }}-cloud",
          "base_domain": "{{ base_domain }}",
          "cloudbuild_installation_id": "41856087",
        }
      backend_bucket: "{{ backend_bucket }}"
      configuration: "services-infra"
      tf_version: "{{ terraform_version }}"
    secrets: inherit

